<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.26
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'><p><img src="https://raw.githubusercontent.com/realtradam/FelECS/master/logos/felecs-logo-text.png" alt="FelECS"></p>

<!-- ![FelFlame](https://filestorage.catgirls.rodeo/images/felecs-logo-smaller-text.png) -->

<p><a href="https://codeclimate.com/github/realtradam/FelFlame/maintainability"><img src="https://api.codeclimate.com/v1/badges/56d425d9078e98efb74b/maintainability" alt="Maintainability"></a>
<a href="https://codeclimate.com/github/realtradam/FelFlame/test_coverage"><img src="https://api.codeclimate.com/v1/badges/56d425d9078e98efb74b/test_coverage" alt="Test Coverage"></a>
<a href="https://github.com/realtradam/FelFlame/blob/master/LICENSE"><img src="https://img.shields.io/github/license/realtradam/FelECS" alt="MIT License"></a>
<a href="https://ko-fi.com/tradam"><img src="https://img.shields.io/static/v1?message=Buy%20me%20a%20coffee&logo=kofi&labelColor=ff5e5b&color=434B57&logoColor=white&label=%20" alt="Ko-Fi"></a>
&lt;!--<a href="http://inch-ci.org/github/realtradam/FelECS"><img src="http://inch-ci.org/github/realtradam/FelECS.svg?branch=master" alt="Inline docs"></a>--&gt; &lt;!-- this is busted --&gt;</p>

<p><strong><a href="https://felecs.tradam.dev">Check out the comprehensive documentation here!</a></strong></p>

<hr>

<!-- vim-markdown-toc GFM -->

<ul>
<li><a href="#what-is-felecs">What is FelECS?</a></li>
<li><a href="#what-is-ecs">What is ECS?</a>
    * <a href="#components">Components</a>
    * <a href="#entities">Entities</a>
    * <a href="#systems">Systems</a>
    * <a href="#scenes">Scenes</a>
    * <a href="#stage">Stage</a>
    * <a href="#order">Order</a></li>
<li><a href="#usage">Usage</a>

<ul>
<li><a href="#entities-1">Entities</a>

<ul>
<li><a href="#creation">Creation</a></li>
<li><a href="#accessing">Accessing</a></li>
<li><a href="#adding-and-removing-components">Adding and Removing Components</a></li>
<li><a href="#accessing-entities-attached-components">Accessing Entities&#39; Attached Components</a></li>
<li><a href="#iterating-over-grouped-entities">Iterating Over Grouped Entities</a></li>
<li><a href="#deletion">Deletion</a></li>
</ul></li>
<li><a href="#components-1">Components</a>

<ul>
<li><a href="#creating-a-component-manager">Creating a Component Manager</a></li>
<li><a href="#creating-a-component-from-a-component-manager">Creating a Component from a Component Manager</a></li>
<li><a href="#accessing-1">Accessing</a></li>
<li><a href="#accessing-attributes-and-changing-them">Accessing Attributes and Changing Them</a></li>
<li><a href="#deleting-components">Deleting Components</a></li>
<li><a href="#accessing-components-attached-entities">Accessing Components&#39; attached Entities</a></li>
</ul></li>
<li><a href="#systems-1">Systems</a>

<ul>
<li><a href="#creation-1">Creation</a></li>
<li><a href="#execution">Execution</a></li>
<li><a href="#alternative-execution">Alternative Execution</a></li>
<li><a href="#clearing-alternative-executions">Clearing Alternative Executions</a></li>
<li><a href="#redefinition">Redefinition</a></li>
</ul></li>
<li><a href="#scenes-1">Scenes</a>

<ul>
<li><a href="#creation-2">Creation</a></li>
<li><a href="#accessing-2">Accessing</a></li>
<li><a href="#adding-systems">Adding Systems</a></li>
<li><a href="#removing-systems">Removing Systems</a></li>
<li><a href="#clearing">Clearing</a></li>
<li><a href="#execution-1">Execution</a></li>
</ul></li>
<li><a href="#stage-1">Stage</a>

<ul>
<li><a href="#adding-scenes">Adding Scenes</a></li>
<li><a href="#removing-scenes">Removing Scenes</a></li>
<li><a href="#executing">Executing</a></li>
</ul></li>
<li><a href="#order-1">Order</a>

<ul>
<li><a href="#setting-the-order">Setting the order</a></li>
</ul></li>
<li><a href="#closing-notes">Closing Notes</a></li>
</ul></li>
<li><a href="#contribution">Contribution</a></li>
</ul>

<!-- vim-markdown-toc -->

<h1 id="what-is-felecs">What is FelECS?</h1>

<p>FelECS is an ECS framework for developing games in the Ruby language. FelECS has been designed from the ground up with these three ideas in mind:</p>

<ol>
<li><strong>Engine Agnostic:</strong> FelECS has been designed to be rendering engine agnostic as long as the target rendering engine is written in Ruby. This means that this framework can be dropped into existing rendering engines such as <a href="http://www.ruby2d.com">Ruby2D</a> or <a href="https://dragonruby.org/toolkit/game">DRGTK</a> with little modifications.</li>
<li><strong>Easily Extensible:</strong> FelECS has been designed such that extensions to its capabilities can be easily added. Extensions such as rendering engine wrappers, premade systems, premade components, etcetera can be easily coded and then distributed as gems.</li>
<li><strong>Principle of (My) Least Astonishment:</strong> I want to develop games using a language and framework I love and makes sense to me, inspired by the <a href="https://en.wikipedia.org/wiki/Ruby_(programming_language)#Philosophy">Philosophy of the creator of Ruby</a>.</li>
</ol>

<h1 id="what-is-ecs">What is ECS?</h1>

<p>ECS is a software architectural pattern that is used in video game development. Traditionally games were programmed using an object oriented method, while ECS instead attempts to program games using a data oriented method instead.<br>
ECS stands for Entity, Component, and System.</p>

<hr>

<h3 id="components">Components</h3>

<p>This is where the data or information of a given &quot;object&quot; is stored. There is no logic or code here. </p>

<h3 id="entities">Entities</h3>

<p>Entities will contain one or more Components, but contains no logic or data otherwise</p>

<h3 id="systems">Systems</h3>

<p>Systems are where all the logic or code is kept. There is no data stored in here.</p>

<hr>

<p>By using this pattern it allows programmers to easily control what an &quot;object&quot; or entity can do and how much data it needs to have. It avoids the issue of inhertance as no inhertance is ever required in this system. If you need a certain entity to have a certain functionality you just add the relevant component to it, and the systems that automatically go over specific components will give your entitiy the desired functionality.  </p>

<p><strong>&quot;But your framework also has <code>Scenes</code>, <code>Stage</code>, and <code>Order</code>, what is that about?&quot;</strong>  </p>

<hr>

<h3 id="scenes">Scenes</h3>

<p>Scenes are simply a collection or subset of Systems. This allows for an easy way to activate and deactivate Systems.</p>

<h3 id="stage">Stage</h3>

<p>The Stage is Scenes which are activated. This means any Scenes on the Stage are executed each frame, while the rest of the Systems are not.</p>

<h3 id="order">Order</h3>

<p>Order is a helper class which can set the priority of Scenes and Systems.</p>

<hr>

<h1 id="usage">Usage</h1>

<p>There are 2 ways of using FelECS. You can either <code>include</code> it as a gem in your project if your game engine supports this. The other option is to download the single file export of FelECS and then <code>require_relative</code> this file in your project. The single file export takes all the ruby code in the various files and concatenates them into a single file so it is more portable and easy to add.</p>

<p>To use the gem method you can do the following: install the gem using <code>gem install felecs</code> or using bundler <code>bundle add felecs</code> and then require it in your project like so: <code>require &#39;felecs&#39;</code>.</p>

<p>To use the single file export method you simply download the felecs.rb file from the <a href="https://github.com/realtradam/FelECS/releases">releases page on Github</a> and add it to your source folder and add a <code>require relative &#39;felecs.rb&#39;</code> line or wherever you have placed the file to use it.</p>

<h2 id="entities">Entities</h2>

<h3 id="creation">Creation</h3>

<p>Entities are essentially &quot;objects&quot; in the game world. To create a new Entity we do the following:</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@entity</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Entities.html" title="FelECS::Entities (class)">Entities</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="FelECS/Entities.html#initialize-instance_method" title="FelECS::Entities#initialize (method)">new</a></span></span>
</code></pre>

<p>or if we want to add (any number of)components to it when creating it:</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@entity</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'>Entites</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
  <span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Components.html" title="FelECS::Components (module)">Components</a></span></span><span class='op'>::</span><span class='const'>Health</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='comma'>,</span>
  <span class='ivar'>@component</span><span class='comma'>,</span>
  <span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Components.html" title="FelECS::Components (module)">Components</a></span></span><span class='op'>::</span><span class='const'>EnemyTeam</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='rparen'>)</span>
</code></pre>

<h3 id="accessing">Accessing</h3>

<p>Oftentimes you will not be accessing an Entity this way. Later we will shows you a more common way of accessing entities.
If you need to you can access Entities using the <code>Entities</code> module:</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@entity</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Entities.html" title="FelECS::Entities (class)">Entities</a></span></span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span>
<span class='ivar'>@entity</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Entities.html" title="FelECS::Entities (class)">Entities</a></span></span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='ivar'>@entity</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Entities.html" title="FelECS::Entities (class)">Entities</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='comment'># you can iterate over all entities this way. Any valid array method can be used
</span></code></pre>

<h3 id="adding-and-removing-components">Adding and Removing Components</h3>

<p>We can still add or remove Components from an Entity after it has been created. Here is how:</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@entity</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span> <span class='ivar'>@component</span>
<span class='ivar'>@entity</span><span class='period'>.</span><span class='id identifier rubyid_remove'>remove</span> <span class='ivar'>@component</span>
</code></pre>

<h3 id="accessing-entities-attached-components">Accessing Entities&#39; Attached Components</h3>

<p>This is the most common way of accessing an Entity</p>

<p>When Components are added to Entities, they can be accessed from the Entity. By using a Component Manager as a key we can access an array of all components created from that Component Manager that are attached to an entity:</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@entity</span><span class='period'>.</span><span class='id identifier rubyid_components'>components</span><span class='lbracket'>[</span><span class='ivar'>@component_manager</span><span class='rbracket'>]</span> <span class='comment'># =&gt; [@component1, @component2, @component3]
</span></code></pre>

<h3 id="iterating-over-grouped-entities">Iterating Over Grouped Entities</h3>

<p>You can execute a block for each entity that has all matching component types attached to it like so:</p>

<pre class="code ruby"><code class="ruby">FelECS::Entities.group(@component_manager_one, @component_manager_two).do |cmp1, cmp2, ent|
    # do stuff with the components and entity
end

# or

FelECS::Entities.group(@mgr1, @mgr2, @mgr3, @mgr4).do |cmp1, cmp2, cmp3, cmp4, ent|
    # do stuff with the components and entity
end

# or

FelECS::Entities.group(@component_manager_one).do |cmp1, ent|
    # do stuff with the component and entity
end

# etc
</code></pre>

<p>You can use any number of component managers and it will only iterate over all entities that have at least all these components from these managers attached to them. The arguments in the block(the arguments surrounded by |pipes|) always correspond to each component manager passed as parameters into the group method and then followed by the entity object.<br>
This means there will be a number of these arguments equal to the number of component managers passed into the group method plus one for the entity.</p>

<h3 id="deletion">Deletion</h3>

<p>To have all Components from an Entity <strong>removed</strong> and the Entity deleted we do the following:</p>

<p>NOTE: The components will <strong>not be deleted</strong>. They are simply <strong>removed</strong> from the entity and then the entity is destroyed. You must handle component deletion yourself as for example singleton components need to removed instead of deleted.</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@entity</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span>
</code></pre>

<h2 id="components">Components</h2>

<h3 id="creating-a-component-manager">Creating a Component Manager</h3>

<p>Components are where all the data is stored. The data is stored in variables or accessors in each component.
These accessors and their defaults are configured when a component manager is created, like so:</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@component_manager</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Components.html" title="FelECS::Components (module)">Components</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="FelECS/Components.html#new-class_method" title="FelECS::Components.new (method)">new</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Stats</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='symbol'>:armour</span><span class='comma'>,</span> <span class='label'>hp:</span> <span class='int'>100</span><span class='rparen'>)</span>
</code></pre>

<p>In this example we created a component manager called &quot;Stats&quot;.
The name given to component managers must follow the same rules for naming constants in ruby for a reason you will shortly see.
The parameters following are all creating the attributes we can set.
We can set any number of parameters we wish, in this example we define two.
The <code>:armour</code> parameter is being created without a default, it will equal to <code>nil</code> when a new component is created, while <code>hp</code> will be equal to 100 when a component is created.
When defining attributes symbols should be used.</p>

<h3 id="creating-a-component-from-a-component-manager">Creating a Component from a Component Manager</h3>

<p>Now that we have a component manager we can make components from it like so:</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@component</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Components.html" title="FelECS::Components (module)">Components</a></span></span><span class='op'>::</span><span class='const'>Stats</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
</code></pre>

<p>Or we can even override the defaults when creating the component:</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@component</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Components.html" title="FelECS::Components (module)">Components</a></span></span><span class='op'>::</span><span class='const'>Stats</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>armour:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>steel</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
</code></pre>

<h3 id="accessing">Accessing</h3>

<p>You can access components using any array method.</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@component</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Components.html" title="FelECS::Components (module)">Components</a></span></span><span class='op'>::</span><span class='const'>Stats</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span>
<span class='ivar'>@component</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Components.html" title="FelECS::Components (module)">Components</a></span></span><span class='op'>::</span><span class='const'>Stats</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='ivar'>@component</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Components.html" title="FelECS::Components (module)">Components</a></span></span><span class='op'>::</span><span class='const'>Stats</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='comment'># you can use iterators this way
</span></code></pre>

<h3 id="accessing-attributes-and-changing-them">Accessing Attributes and Changing Them</h3>

<p>There are a few different ways we can read or change the attributes of a component depending on what our needs are.
Here are the ways to edit attrubutes, followed by the ways to read them.</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@component</span><span class='period'>.</span><span class='id identifier rubyid_armour'>armour</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Mythril</span><span class='tstring_end'>&#39;</span></span>
<span class='ivar'>@component</span><span class='period'>.</span><span class='id identifier rubyid_update_attrs'>update_attrs</span><span class='lparen'>(</span><span class='label'>armour:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Leather</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>hp:</span> <span class='int'>95</span><span class='rparen'>)</span>
</code></pre>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@component</span><span class='period'>.</span><span class='id identifier rubyid_hp'>hp</span> <span class='comment'># =&gt; 95
</span><span class='ivar'>@component</span><span class='period'>.</span><span class='id identifier rubyid_to_h'>to_h</span> <span class='comment'># =&gt; {armour: &#39;Leather&#39;, hp: 95}
</span></code></pre>

<h3 id="deleting-components">Deleting Components</h3>

<p>Deleting a Component is the same convention as deleting an Entity. When a Component is deleted referenced to it such as to entities are automatically cleared.</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@component</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span>
</code></pre>

<h3 id="accessing-components-attached-entities">Accessing Components&#39; attached Entities</h3>

<p>Components also keep track of what Entities are using it. To access this list we do the following:</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@component</span><span class='period'>.</span><span class='id identifier rubyid_entities'>entities</span> <span class='comment'># =&gt; [@entity1, @entity2, @entity3]
</span>
<span class='comment'># get the first entity attached.
</span><span class='comment'># this will throw a warning if there is more or less then
</span><span class='comment'># exactly one entity
</span><span class='ivar'>@component</span><span class='period'>.</span><span class='id identifier rubyid_entity'>entity</span> <span class='comment'># =&gt; @entity
</span></code></pre>

<h2 id="systems">Systems</h2>

<h3 id="creation">Creation</h3>

<p>We can create Systems like so:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Systems.html" title="FelECS::Systems (class)">Systems</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="FelECS/Systems.html#initialize-instance_method" title="FelECS::Systems#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Render</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>priority:</span> <span class='int'>2</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='comment'># Code and Logic
</span><span class='kw'>end</span>
</code></pre>

<p>The name we assign is how we can access the System, like so:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Systems.html" title="FelECS::Systems (class)">Systems</a></span></span><span class='op'>::</span><span class='const'>Render</span>
</code></pre>

<p>Priority determines the order Systems should be executed, this is used for <code>Scenes</code> and the <code>Stage</code>.
The lower the number, the earlier a given System will be executed.
E.g priority 1 will go first, priority 2 will go second, etcetera. </p>

<p>Both Scenes and Systems have a priority. System priority will decide the order it will be called inside of a Scene, which the Scene priority will decide the order it will be called inside of the Stage.</p>

<p>Often we will want to execute some logic on each Component in a given Component Manager so our code might look like this:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Systems.html" title="FelECS::Systems (class)">Systems</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="FelECS/Systems.html#initialize-instance_method" title="FelECS::Systems#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Render</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>priority:</span> <span class='int'>2</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Components.html" title="FelECS::Components (module)">Components</a></span></span><span class='op'>::</span><span class='const'>Sprites</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_component'>component</span><span class='op'>|</span>
    <span class='comment'># do something with these components
</span>  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<h3 id="execution">Execution</h3>

<p>After we create a System, it won&#39;t do anything on its own until we tell it to. Here is how:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Systems.html" title="FelECS::Systems (class)">Systems</a></span></span><span class='op'>::</span><span class='const'>Render</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span>
</code></pre>

<p>Sometimes you might want to manually activate a System, but the more common way to have Systems be triggered is to use Scenes and the Stage or the alternative ways of execution.</p>

<h3 id="alternative-execution">Alternative Execution</h3>

<p>Sometimes you want a System to automatically trigger when a special even happens. FelECS can keep track of when a Component is added, removed, or when an attribute is changed and then execute Systems linked to these events. Here is how to create these links:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># When this Component is added to an Entity, this System will be called
</span><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Systems.html" title="FelECS::Systems (class)">Systems</a></span></span><span class='op'>::</span><span class='const'>PassiveRegen</span><span class='period'>.</span><span class='id identifier rubyid_trigger_when_added'>trigger_when_added</span><span class='lparen'>(</span><span class='ivar'>@component</span><span class='rparen'>)</span>

<span class='comment'># When this Component is removed from an Entity, this System will be called
</span><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Systems.html" title="FelECS::Systems (class)">Systems</a></span></span><span class='op'>::</span><span class='const'>PassiveRegen</span><span class='period'>.</span><span class='id identifier rubyid_trigger_when_removed'>trigger_when_removed</span><span class='lparen'>(</span><span class='ivar'>@component</span><span class='rparen'>)</span>

<span class='comment'># When this Component&#39;s health attribute is changed, this System will be called
</span><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Systems.html" title="FelECS::Systems (class)">Systems</a></span></span><span class='op'>::</span><span class='const'>PassiveRegen</span><span class='period'>.</span><span class='id identifier rubyid_trigger_when_is_changed'>trigger_when_is_changed</span><span class='lparen'>(</span><span class='ivar'>@component</span><span class='comma'>,</span> <span class='symbol'>:health</span><span class='rparen'>)</span>
</code></pre>

<p>If we want these triggers to happen for all Components that belong to specific Component Manager then we can do that instead:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># When a Component from this Component Manager is added to an Entity, this System will be called
</span><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Systems.html" title="FelECS::Systems (class)">Systems</a></span></span><span class='op'>::</span><span class='const'>PassiveRegen</span><span class='period'>.</span><span class='id identifier rubyid_trigger_when_added'>trigger_when_added</span><span class='lparen'>(</span><span class='ivar'>@component_manager</span><span class='rparen'>)</span>

<span class='comment'># When a Component from this Component Manager is removed from an Entity, this System will be called
</span><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Systems.html" title="FelECS::Systems (class)">Systems</a></span></span><span class='op'>::</span><span class='const'>PassiveRegen</span><span class='period'>.</span><span class='id identifier rubyid_trigger_when_removed'>trigger_when_removed</span><span class='lparen'>(</span><span class='ivar'>@component_manager</span><span class='rparen'>)</span>

<span class='comment'># When this Component&#39;s health attribute from this Component Manager is changed, this System will be called
</span><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Systems.html" title="FelECS::Systems (class)">Systems</a></span></span><span class='op'>::</span><span class='const'>PassiveRegen</span><span class='period'>.</span><span class='id identifier rubyid_trigger_when_is_changed'>trigger_when_is_changed</span><span class='lparen'>(</span><span class='ivar'>@component_manager</span><span class='comma'>,</span> <span class='symbol'>:health</span><span class='rparen'>)</span>
</code></pre>

<p>We can create any number of these links between Systems, Components, and Component Manangers as we like, simply call the method again with our other Components and Component Managers</p>

<h3 id="clearing-alternative-executions">Clearing Alternative Executions</h3>

<p>If we wish to remove these links that we created, we can do that using the follwing function in any of the following ways:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># clears ALL triggers with this system
</span><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Systems.html" title="FelECS::Systems (class)">Systems</a></span></span><span class='op'>::</span><span class='const'>PassiveRegen</span><span class='period'>.</span><span class='id identifier rubyid_clear_triggers'>clear_triggers</span>

<span class='comment'># clears ALL triggers with this Component Manager
</span><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Systems.html" title="FelECS::Systems (class)">Systems</a></span></span><span class='op'>::</span><span class='const'>PassiveRegen</span><span class='period'>.</span><span class='id identifier rubyid_clear_triggers'>clear_triggers</span><span class='lparen'>(</span><span class='ivar'>@component</span><span class='rparen'>)</span>

<span class='comment'># clear the &#39;trigger_when_added&#39; for this Component
</span><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Systems.html" title="FelECS::Systems (class)">Systems</a></span></span><span class='op'>::</span><span class='const'>PassiveRegen</span><span class='period'>.</span><span class='id identifier rubyid_clear_triggers'>clear_triggers</span><span class='lparen'>(</span><span class='ivar'>@component</span><span class='comma'>,</span> <span class='symbol'>:added</span><span class='rparen'>)</span>

<span class='comment'># clear the &#39;trigger_when_removed&#39; for this Component
</span><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Systems.html" title="FelECS::Systems (class)">Systems</a></span></span><span class='op'>::</span><span class='const'>PassiveRegen</span><span class='period'>.</span><span class='id identifier rubyid_clear_triggers'>clear_triggers</span><span class='lparen'>(</span><span class='ivar'>@component</span><span class='comma'>,</span> <span class='symbol'>:removed</span><span class='rparen'>)</span>

<span class='comment'># clear the &#39;trigger_when_is_changed&#39; for this Component specifically for the health attribute
</span><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Systems.html" title="FelECS::Systems (class)">Systems</a></span></span><span class='op'>::</span><span class='const'>PassiveRegen</span><span class='period'>.</span><span class='id identifier rubyid_clear_triggers'>clear_triggers</span><span class='lparen'>(</span><span class='ivar'>@component</span><span class='comma'>,</span> <span class='symbol'>:is_set</span><span class='comma'>,</span> <span class='symbol'>:health</span><span class='rparen'>)</span>
</code></pre>

<p>Likewise we can do the same with Component Managers:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># clears ALL triggers with this Component
</span><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Systems.html" title="FelECS::Systems (class)">Systems</a></span></span><span class='op'>::</span><span class='const'>PassiveRegen</span><span class='period'>.</span><span class='id identifier rubyid_clear_triggers'>clear_triggers</span><span class='lparen'>(</span><span class='ivar'>@component_manager</span><span class='rparen'>)</span> 

<span class='comment'># clear the &#39;trigger_when_added&#39; for this Component Manager
</span><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Systems.html" title="FelECS::Systems (class)">Systems</a></span></span><span class='op'>::</span><span class='const'>PassiveRegen</span><span class='period'>.</span><span class='id identifier rubyid_clear_triggers'>clear_triggers</span><span class='lparen'>(</span><span class='ivar'>@component_manager</span><span class='comma'>,</span> <span class='symbol'>:added</span><span class='rparen'>)</span> 

<span class='comment'># clear the &#39;trigger_when_removed&#39; for this Component Manager
</span><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Systems.html" title="FelECS::Systems (class)">Systems</a></span></span><span class='op'>::</span><span class='const'>PassiveRegen</span><span class='period'>.</span><span class='id identifier rubyid_clear_triggers'>clear_triggers</span><span class='lparen'>(</span><span class='ivar'>@component_manager</span><span class='comma'>,</span> <span class='symbol'>:removed</span><span class='rparen'>)</span> 

<span class='comment'># clear the &#39;trigger_when_is_changed&#39; for this Component Manager specifically for the health attribute
</span><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Systems.html" title="FelECS::Systems (class)">Systems</a></span></span><span class='op'>::</span><span class='const'>PassiveRegen</span><span class='period'>.</span><span class='id identifier rubyid_clear_triggers'>clear_triggers</span><span class='lparen'>(</span><span class='ivar'>@component_manager</span><span class='comma'>,</span> <span class='symbol'>:is_set</span><span class='comma'>,</span> <span class='symbol'>:health</span><span class='rparen'>)</span> 
</code></pre>

<h3 id="redefinition">Redefinition</h3>

<p>If we wanted to change what code or logic a given System executes, we could do that with:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Systems.html" title="FelECS::Systems (class)">Systems</a></span></span><span class='op'>::</span><span class='const'>PassiveRegen</span><span class='period'>.</span><span class='id identifier rubyid_redefine'>redefine</span> <span class='kw'>do</span>
  <span class='comment'># Some new logic or code
</span><span class='kw'>end</span>
</code></pre>

<h2 id="scenes">Scenes</h2>

<h3 id="creation">Creation</h3>

<p>Once we have all the core parts of ECS, we will want to organize our Systems. To do this we will use Scenes to group up Systems so they can quickly be enabled or disabled. Note that <a href="#alternative-execution">Alternative Executions</a> will occur even if they are not part of a Scene. Here is how we make a new Scene:</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@scene</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Scenes.html" title="FelECS::Scenes (class)">Scenes</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="FelECS/Scenes.html#initialize-instance_method" title="FelECS::Scenes#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ExampleScene</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>priority:</span> <span class='int'>5</span><span class='rparen'>)</span>
</code></pre>

<h3 id="accessing">Accessing</h3>

<p>Just like other classes in FelECS, the name we gave the Scene is how we access it:</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@scene</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Scenes.html" title="FelECS::Scenes (class)">Scenes</a></span></span><span class='op'>::</span><span class='const'>ExampleScene</span>
</code></pre>

<h3 id="adding-systems">Adding Systems</h3>

<p>Adding Systems is simple. We can add as many as we want. In this example we add 3 different systems:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Scenes.html" title="FelECS::Scenes (class)">Scenes</a></span></span><span class='op'>::</span><span class='const'>ExampleScene</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span>
  <span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Systems.html" title="FelECS::Systems (class)">Systems</a></span></span><span class='op'>::</span><span class='const'>Render</span><span class='comma'>,</span>
  <span class='ivar'>@system2</span><span class='comma'>,</span>
  <span class='ivar'>@system3</span>
<span class='rparen'>)</span>
</code></pre>

<h3 id="removing-systems">Removing Systems</h3>

<p>Removing Systems works similarly:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Scenes.html" title="FelECS::Scenes (class)">Scenes</a></span></span><span class='op'>::</span><span class='const'>ExampleScene</span><span class='period'>.</span><span class='id identifier rubyid_remove'>remove</span><span class='lparen'>(</span>
  <span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Systems.html" title="FelECS::Systems (class)">Systems</a></span></span><span class='op'>::</span><span class='const'>Render</span><span class='comma'>,</span>
  <span class='ivar'>@system2</span><span class='comma'>,</span>
  <span class='ivar'>@system3</span>
<span class='rparen'>)</span>
</code></pre>

<h3 id="clearing">Clearing</h3>

<p>If you want to remove all Systems from a Scene here is how we do it:</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@scene</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
</code></pre>

<h3 id="execution">Execution</h3>

<p>To execute all Systems within a scene once we can just do:</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@scene</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span>
</code></pre>

<p>The Scene will make sure that the systems are executed in the correct order based on their given priorities</p>

<h2 id="stage">Stage</h2>

<h3 id="adding-scenes">Adding Scenes</h3>

<p>Finally we have the Stage. There is only a single Stage and we do not have to create it as it exists by default. By adding a Scene to the Stage we are saying that the Scene is &#39;active&#39;. To add a Scene we do the following:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Stage.html" title="FelECS::Stage (module)">Stage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_add'><span class='object_link'><a href="FelECS/Stage.html#add-class_method" title="FelECS::Stage.add (method)">add</a></span></span> <span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'>Scene</span><span class='op'>::</span><span class='const'>ExampleScene</span>
</code></pre>

<h3 id="removing-scenes">Removing Scenes</h3>

<p>Likewise we can remove Scenes:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Stage.html" title="FelECS::Stage (module)">Stage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_remove'><span class='object_link'><a href="FelECS/Stage.html#remove-class_method" title="FelECS::Stage.remove (method)">remove</a></span></span> <span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'>Scene</span><span class='op'>::</span><span class='const'>ExampleScene</span>
</code></pre>

<h3 id="executing">Executing</h3>

<p>On each frame of the game generally we will want to execute the Stage once. When the Stage is executed it is progressing your game 1 frame forward. The Stage will call all Scenes you added to it in the order of their priority. Here is how we do it:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Stage.html" title="FelECS::Stage (module)">Stage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_call'><span class='object_link'><a href="FelECS/Stage.html#call-class_method" title="FelECS::Stage.call (method)">call</a></span></span>
</code></pre>

<h2 id="order">Order</h2>

<h3 id="setting-the-order">Setting the order</h3>

<p>To set the order you just need to call <code>FelECS::Order.sort</code> and pass Scenes or Systems in the parameters in the order you wish for them to execute</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Order.html" title="FelECS::Order (module)">Order</a></span></span><span class='period'>.</span><span class='id identifier rubyid_sort'><span class='object_link'><a href="FelECS/Order.html#sort-class_method" title="FelECS::Order.sort (method)">sort</a></span></span><span class='lparen'>(</span>
  <span class='ivar'>@system1</span><span class='comma'>,</span>
  <span class='ivar'>@system2</span><span class='comma'>,</span>
  <span class='ivar'>@system3</span>
<span class='rparen'>)</span>
</code></pre>

<p>If you want some Scenes or Systems to have the same priority then just pass them as an array:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="FelECS.html" title="FelECS (module)">FelECS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FelECS/Order.html" title="FelECS::Order (module)">Order</a></span></span><span class='period'>.</span><span class='id identifier rubyid_sort'><span class='object_link'><a href="FelECS/Order.html#sort-class_method" title="FelECS::Order.sort (method)">sort</a></span></span><span class='lparen'>(</span>
  <span class='ivar'>@scene1</span><span class='comma'>,</span>
  <span class='lbracket'>[</span><span class='ivar'>@scene2_1</span><span class='comma'>,</span> <span class='ivar'>@scene2_2</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='ivar'>@scene3</span>
<span class='rparen'>)</span> 
</code></pre>

<h2 id="closing-notes">Closing Notes</h2>

<p>There are some methods I haven&#39;t gone over in the overview. If you want to see everything and read in more detail check out the <a href="https://felflame.tradam.fyi">Documentation</a>!</p>

<h1 id="contribution">Contribution</h1>

<p>Contributors are welcome! I am always looking to impove the capabilities of game development in Ruby. Feel free to open an issue to discuss a proposed changed or fix. To code a change or fix first fork the project. Next write your changes or fixes. Make sure all your changes and fixes are properly documented using Yard(I will not merge if it is not 100% documented) and make sure everything has tests written for it with Rspec(I will also not merge if it does not have 100% test coverage). Once you have your changes made then simply make a pull request.  </p>

<p>If you need help writing documentation or tests feel free to ask!  </p>

<p>If you want to contribute to development with a thanks you can always <a href="https://ko-fi.com/tradam">buy me a coffee ;^)</a></p>
</div></div>

      <div id="footer">
  Generated on Thu Feb 17 07:54:07 2022 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.26 (ruby-2.7.3).
</div>

    </div>
  </body>
</html>